<!DOCTYPE html>
<html>
<head>
	<title>Pop-up Cart Example</title>
	<style>
		/* Styling for the modal window */
		.modal {
			display: none;
			position: fixed;
			z-index: 1;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgba(0,0,0,0.4);
		}
		
		/* Styling for the modal content */
		.modal-content {
			background-color: white;
			margin: 10% auto;
			padding: 20px;
			border: 1px solid #888;
			width: 1400px;
			height: 80%;
			overflow: auto;
		}
		
		/* Styling for the close button */
		.close {
			color: #aaa;
			float: right;
			font-size: 28px;
			font-weight: bold;
		}
		
		.close:hover,
		.close:focus {
			color: black;
			text-decoration: none;
			cursor: pointer;
		}
        
        /*----Order Information-----*/
        .products {
            float: left;
        }
        .products + .total-price{
            position: relative;
        }

        .cart-page{
            margin: 80px auto;
            width: 500px
            }
        table{
            width : 80%;
            border-collapse: collapse;
            margin-bottom: 20px; /* add some space between the two tables */

        }   
        table + table {
        /* style for second table */
            position: relative;
            top: 20px; /* move the second table 20px down from its normal position */
        }
        th{
        text-align: left;
        padding: 5px;
        color: #fff;
        background: #ff523b;
        font-weight: normal;
        }
        th:nth-child(4) {
            display: none;
        }
        td{
        padding: 10px 5px;
        }
        td img{
        width: 80px;
        height: 80px;
        margin-right: 10px;
        }
        td input{
        width: 40px;
        height: 30px;
        padding: 5px;
        }
        td a{
        color: #ff523b;
        font-size: 12px;
        }
        .cart-info{
        display: flex;
        flex-wrap: wrap;
        }
        .total-price{
        display: flex;
        justify-content: left;
        clear: both;
        }
        #totalPrice{
        border-top: #ff523b 3px solid;
        width: 100%;
        max-width: 971px;
        }

        td:last-child{
        text-align: left; /*items on last column will...*/
        }
        th:last-child{
        text-align: left;/*header item on last column will...*/
        }

        #tag{
        opacity: 0.5;
        }


        .cart-summary {
  background-color: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 5px;
  padding: 20px;
  text-align: center;
  margin-top: 20px;
}

.cart-summary h2 {
  font-size: 24px;
  margin-bottom: 10px;
}

.cart-summary h3 {
  color: #f00;
  font-size: 30px;
  margin-top: 10px;
  margin-bottom: 20px;
}

.cart-summary button {
  background-color: #f00;
  border: none;
  color: #fff;
  font-size: 16px;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.cart-summary button:hover {
  background-color: #c00;
}

	</style>
</head>
<body>

	<!-- Cart link -->
	<li><a href="#" id="cartLink">Cart</a></li>
	
	<!-- Modal window -->
	<div id="myModal" class="modal">
        <div class="modal-content">
            <span class = "close" > &times;</span>
            
                <table>
                    <tr>
                      <th>Product</th>
                      <th>Quantity</th>
                      <th>Subtotal</th>
                      <th>Actions</th> <!-- New column for product removal buttons -->
                    </tr>
                    <tr>
                      <td>
                        <div class="cart-info">
                          <img src="./img/cart/lenovo.webp">
                          <div>
                            <p>Lenovo 8gb i5 1.6GHz Windows 11 Pro</p><!--product name-->
                            <small>Price: R12 500</small>
                          </div>
                        </div>
                      </td>
                      <td><input type="number" value="1"></td>
                      <td>R12 500</td>
                      <td><button class="remove-product">Remove</button></td> <!-- New column for product removal buttons -->
                    </tr>
                    <tr>
                      <td>
                        <div class="cart-info">
                          <img src="./img/cart/LEDs.webp">
                          <div>
                            <p>12V LED light strip 5M</p><!--product name-->
                            <small>Price: R150</small>
                          </div>
                        </div>
                      </td>
                      <td><input type="number" value="1"></td>
                      <td>R150.00</td>
                      <td><button class="remove-product">Remove</button></td> <!-- New column for product removal buttons -->
                    </tr>
                  </table>
                  

                <div class="cart-summary">
                    <h2>Cart Summary</h2>
                    <p id = "cart-total"></p>
                    <h3 id = "cart-sum">R</h3>
                    <button id="checkout">Proceed to Checkout</button>
                </div>
                  
        </div>
		
           
	</div>

	<!-- JavaScript to display and hide the modal window -->
	<script>
		var cartLink = document.getElementById("cartLink");
		var modal = document.getElementById("myModal");
		var close = document.getElementsByClassName("close")[0];

		cartLink.onclick = function() {
			modal.style.display = "block";
		}

		close.onclick = function() {
			modal.style.display = "none";
		}

		window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
		}


        let sum = 0;
        const rows = document.querySelectorAll('table tr');
        for (let i = 1; i < rows.length; i++) { 
            const subtotalStr = rows[i].querySelector('td:nth-child(3)').textContent;
            const subtotalNum = parseFloat(subtotalStr.replace(/[^\d.-]+/g,""));
            sum += subtotalNum;
        }
        const totalElem = document.getElementById('cart-total');
        totalElem.textContent = `TOTAL: (${rows.length - 1} items)`;
        const sumElem = document.getElementById('cart-sum');
        sumElem.textContent += sum;
        console.log(sum);


	</script>

</body>
</html>
