<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Messages | Firebase</title>
    <link rel="stylesheet" href="./search.css">
</head>

<body>
    <div class="discount-banner">
        <p>Discount available on valid coupon code</p>
      </div>
    <div>
        <nav class="topnav">
            <div class="logo">
                <img src="./img/home/RunTime_logo.png" />
            </div>
           
        </nav>
    </div>

    <div>
        <h1>SEARCH FOR PRODUCT</h1>
    </div>

    <div>
        <input type="search" class="search-bar" id="searchInput" onkeyup="searchObjects()" placeholder="Search here...">
    </div>
    <div class="dropdown">
        <button class="dropbtn" onclick="toggleDropdown()">Filter by Category</button>
        <div class="dropdown-content" id="categoryDropdown">
            <!-- Category options will be added dynamically -->
        </div>
    </div>
	
    <div class="object-list">
        <!-- Object snapshots will be displayed here -->
    </div>
    <ul id="objectList"></ul>
        <!-- Object snapshots will be displayed here -->
        <button class="doneFilteringButton" onclick="refreshPage()">Done Filtering</button>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
    <script src="./search.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase-storage.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase-auth.js"></script>
   
    <script>
        // Function to generate a random sale percentage (10%, 15%, 20%)
        function generateRandomSalePercentage() {
            var percentages = [10, 15, 20];
            var randomIndex = Math.floor(Math.random() * percentages.length);
            return percentages[randomIndex];
        }

        // Function to add the sale percentage tag to each image
        function addSalePercentageTag() {
            var images = document.querySelectorAll(".item-image");
            images.forEach(function (image) {
                var salePercentage = generateRandomSalePercentage();
                var saleTag = document.createElement("div");
                saleTag.className = "sale-tag";
                saleTag.textContent = salePercentage + "% off";
                image.parentNode.appendChild(saleTag);
            });
        }

        // Call the addSalePercentageTag function after the objects are displayed
        displayFilteredProducts(filteredProducts);
        addSalePercentageTag();
    </script>
</body>

</html>
